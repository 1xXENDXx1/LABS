= Лабораторная работа №1
:author: Чалов Иван Дмитриевич КЭ-413
:icon: front
:secttrue: true
:toc: left
:toclevels: 2
:secttruelevels: 2
:sectnums: |,all|
:stylesheet: custom.css
:stylesdir: ./styles
:imagesdir: pic
:toc:
:toc-title: Оглавление
:figure-caption: Рисунок
:table-caption: Таблица

== Процесс разработки ПО

Программное обеспечение (ПО) - это программа или совокупность программ, необходимая для управления вычислительной машиной (компьютером). Таким образом, суть разработки ПО заключается в создании системы, которая будет решать поставленную ей задачу, например, автоматизация бизнес-процесса производственной компании.

Далее разберем этапы создания такого ПО:

1. Сбор и анализ требования для составления ТЗ, которое нужно для создания ПО заказчика. На этом этапе компания заказчик и компания разработчик обговаривают все подробности по реализации такого продукта, т.е. составляют ТЗ.

2. Далее производится проектирование системы. Уже по условия ТЗ создаются архитектура и дизайн ПО, также анализируются взаимодействия компонентов такой системы (БД, платформа реализации и т.п.). На этом этапе ТЗ может корректироваться, если заказчика что-то не устроит.

3. После того, как все требования были учтены и спроектированная система полностью удовлетворяет заказчика, начинается этап программирования/кодирования ПО. На этом этапе разработчики пишут код на языках, установленных в ТЗ, и создают ПО.

4. Также одним из важных этапов является тестирование ПО. Обязательно, после программирования ПО система проверяется на корректность работы.

5. После того, как ПО прошло все испытания и все проверки, оно отправляется заказчику и внедряется в систему компании.

6. Далее, после выпуска, ПО поддерживается для добавления новых функций, которые облегчат работу с таким приложением и позволят ему работать быстрее. Иногда по ПО собирается обратная связь, чтобы произвести статистический анализ и улучшить работу компании производителя.

== Компиляция кода
Компиляция кода - это процесс преобразования кода (рисунок "<<pic1>>"), который написан на определенном языке программирования, в машинный код или другой формат, который будет понятен компьютеру. Как правило компиляция производится обслуживаемой программой называемой компилятор.

.Компиляция кода
[#pic1]
image::pic1.png[]

Сначала компилятор вызывает препроцессор, который обрабатывает директивы препроцессора, такие как #include, #define  и другие. Препроцессор выполняет текстовые замены, добавляет заголовочные файлы и выполняет макроподстановки. После завершения этого шага исходный код передается компилятору для дальнейшей обработки.
Далее компилятор разбивает исходный код на небольшие части, называемые токенами. Так программа определяет символы и слова, написанные в программе. Затем компилятор проверяет, правильно ли составлен код и устанавливает связь между компонентами программы. После этого компилятор проверяет, соблюдены ли правила языка и нет ли ошибок. На следующем этапе компилятор создает промежуточное представление программы. Затем компилятор улучшает этот промежуточный код, чтобы программа работала быстрее и эффективнее. После всех этих шагов компилятор переводит промежуточный код в машинный код, который может выполняться процессором. И в конце концов компилятор объединяет все части программы (линковка) и создает исполняемый файл, который можно запустить на компьютере.


=== Препроцессор

Препроцессор - это программа, которая выполняет предварительную обработку исходного кода перед компиляцией. Первая стадия компиляции.

Препроцессор используется для обработки деректив таких как #include, #define, #ifdef, #ifndef, #endif.

=== Линковка
Линковка - это один из этапов компиляции кода, в процессе которого производится компановка объектных модулей программы в исполняемый файл.


Линковка для микроконтроллера имеет другую структуру: в процессе разработки программ для микроконтроллеров код обычно разбивается на несколько модулей (файлов), каждый из которых компилируется отдельно. Эти модули содержат как пользовательский код, так и вызовы к библиотечным функциям (например, для работы с периферией микроконтроллера: таймерами, портами ввода-вывода и т. д.).

Таким образом, линковка определяет логику работы программы, посредствам объединения программных частей в исполняемый файл, который будет загружен в микроконтроллер и выполняться в его среде.

=== Загрузка
Загрузка программы в микроконтроллер - это процесс записи скомпилированного и слинкованного кода (обычно в виде файлов форматов .hex или .bin) во флеш-память микроконтроллера. После этого микроконтроллер может выполнить загруженный код при перезагрузке или подаче питания. Этот процесс включает несколько шагов и зависит от микроконтроллера и используемого программного обеспечения и аппаратных средств.

== Запуск кода на микроконтроллере
Функция int main() является стартовой точкой программы. Для пользователя выполнение программы начинается с вызова этой функции и выполнения ее содержимого. Однако, до того как будет вызвана функция main(), микроконтроллер выполняет множество различных действий:

- Производится инициализация стека на конечный адрес стека после подачи питания (рисунок "<<pic2>>").

.Инициализация стека
[#pic2]
image::pic2.png[]

- Инициализация переменных в нулевые значения (рисунок "<<pic3>>"): После подачи питания на микроконтроллер, регистр адреса команды указывает на 0 адрес, микроконтроллер начинает работу с адреса 0. По адресу 0, находится таблица векторов прерываний, по начальному вектору находится команда инициализации указателя стека на конечный адрес стека и далее перехода на функцию инициализации.

.Инициализация переменных в нулевые значения
[#pic3]
image::pic3.png[]

- Далее производится инициализация переменных, то есть присваивание начального значения переменной в момент её объявления или до её первого использования в коде. Подробно показано на рисунке "<<pic4>>".

.Инициализация переменных
[#pic4]
image::pic4.png[]

- После всех пройденных этапов программа контроллер вызывает функцию main(). На рисунке "<<pic5>>" представлен пример запуска main().

.Вызов функции main()
[#pic5]
image::pic5.png[]

== Понятие стека
Стек - это структура данных, которую программа использует для временного хранение информации. Стек являются важным элементов программы, так как обеспечивает управление временными данными.

Принцип работы стека: последний добавленный элемент будет первым, который будет извлечён.

Стек нужен, чтобы вызвать функцию, так как при вызове функции текущие параметры и локальные переменные помещаются в стек, а после завершения функции они удаляются, и управление возвращается к вызывающему коду. Также стек применяется для хранения промежуточных состояний при вызове рекурсии.

== Линкер

Линкер - это программа, которая выполняет линковку, то есть объединяет один или несколько объектных файлов в исполняемый файл или библиотеку. Линкер обеспечивает правильное связывание всех компонентов и их совместную работу.

=== Что делает компилятор
Компилятор - это специальная программа, которая преобразует исходный код, написанный на языке программирования (например, С++), в машинный код, который может быть выполнен компьютером. Подробней о компиляции см. пункт 2.

=== Как влияет оптимизация на результат компиляции
Оптимизация в значительной степени влияет на результат компиляции. Оптимизация повышает эффективность использования кода по средствам:

- уменьшения размера кода, например удаляет неиспользуемые части кода;

- ускорения работы программы или повышение производительности программы;

- эффективного перераспределение ресурсов системы;

- повышения устойчивости программы к ошибкам.

Однако, такая оптимизация приводит к некоторым недостаткам:

- увеличение времени компиляции;

- усложнение кода отладки оптимизированного кода.

== Ответы на вопросы по лекции 1
[qanda]
Дайте определение понятию “Интегрированной среде разработки”::
Ответ: **Интегрированная среда разработка - это ПО, которое предоставляет доступ разработчикам набор инструментов для создания, тестирования и отладки ПО.** 
Что такое компилятор и чем он отличается от транслятора?::
Ответ: **Понятие компилятора было разобрано в пункте 5.1. Транслятор - это общее понятие, которое охватывает все программы, которые каким либо образом переводят код из одного языка на другой. Таким образом, компилятор это вид транслятора, который преобразует код в машинный код или код исполнения.**
Что такое компоновщик и какие функции он выполняет?::
Ответ: **Компановщик это тот же линкер, он выполняет линковку (сборку) программы из ее файлов, которые создает компилятор.**
Почему важен процесс проектирования ПО какие задачи входят в этот процесс?::
Ответ: **Процесс проектирования важен т.к. при качественном проектировании можно избежать проблем, связанных с этапами анализа, проектирования, проектирования, тестирования, выпуска и поддержки ПО.**
Дорисуйте процесс разработки ПО, описанный на изображении <<IAR_Workbench>> с учетом итеративности связей в этом процессе::
Ответ: 
Зачем нужная отладка и в каких случаях она применяется? Для чего применяются точки остановки?::
Ответ: **Отладка является процессом выявления ошибок. Она используется на этапах разработки, тестирования и выпуска ПО. Одним из элементов отладки являются точки остановки - это маркеры, устанавливаемые в коде, которые приостанавливают код в определенной строке, далее пользователь (в роле программиста) смотрит необходимые данные, которые ему были нужны.**
Какие еще важные IAR workbench можно добавить в таблицу <<Характеристики IAR>>::
Ответ: